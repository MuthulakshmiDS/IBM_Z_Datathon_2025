<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üå± EcoEdu: Gamified Environmental Education</title>
<style>
/* body {
  background: #1a1a1a;
  color: #f5f5f5;
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  padding: 0;
} */
 body {
  background: url('image.png') no-repeat center center fixed;
  background-size: cover;
  color: #f5f5f5;
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  padding: 0;
}

.container { padding: 30px; }
h1 { text-align:center; font-size:2.4rem; }
.nav-bar {
  display: flex; flex-wrap: wrap; justify-content: center; margin-bottom:20px;
}
.nav-btn {
  background: #333; color: #fff; border:none; margin:5px;
  padding:10px 20px; border-radius:8px; cursor:pointer; transition:0.2s;
}
.nav-btn.active { background:#4caf50; }
.section { display:none; text-align:center; }
.section.active { display:block; }
input[type="text"], input[type="number"] {
  padding:8px; border-radius:5px; border:none; margin:10px;
}
button { background:#4caf50; border:none; padding:10px 20px; border-radius:8px; color:white; cursor:pointer; transition:0.2s; }
button:hover { background:#45a049; }
ul { list-style-type:none; padding:0; }
#quizBox { margin-top:20px; }
#chatWindow { height:200px; overflow-y:auto; background:#222; padding:10px; border-radius:8px; margin-bottom:10px; text-align:left; }
.chat-message { margin:5px 0; }
table { width: 80%; margin:auto; border-collapse: collapse; color:#fff; }
th, td { border:1px solid #7fff7f; padding:8px; }
.badge { margin:5px; padding:8px; border-radius:6px; display:inline-block; }
.platinum { background: #e5e4e2; color:#000; }
.gold { background:#ffd700; color:#000; }
.silver { background:#c0c0c0; color:#000; }
.bronze { background:#cd7f32; color:#000; }
.rising { background:#4caf50; color:#fff; }
</style>
</head>
<body>
<div class="container">
<h1>üå± EcoEdu: Gamified Environmental Education</h1>
<div class="nav-bar">
  <button class="nav-btn active" data-section="home">Home</button>
  <button class="nav-btn" data-section="quiz">Quiz</button>
  <button class="nav-btn" data-section="carbon">Carbon Calculator</button>
  <button class="nav-btn" data-section="leaderboard">Leaderboard</button>
  <button class="nav-btn" data-section="badges">Badges</button>
  <button class="nav-btn" data-section="chatbot">Chatbot</button>
</div>

<!-- HOME -->
<div id="home" class="section active">
  <h2>Welcome to EcoEdu! üåç</h2>
  <p>Learn about the environment through fun and interactive activities.</p>
  <label>Enter your name:</label><br>
  <input type="text" id="playerName" placeholder="Your name">
  <button id="addUserBtn">Add Player</button>
  <p>Players added:</p>
  <ul id="playerList"></ul>
  <button id="startQuizBtn">Start Quiz</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="section">
  <h2>Eco Quiz üåø</h2>
  <div id="quizBox"></div>
</div>

<!-- CARBON CALCULATOR -->
<div id="carbon" class="section">
  <h2>Carbon Footprint Calculator</h2>
  <label>Miles driven per week:</label>
  <input type="number" id="miles" value="0" min="0">
  <div id="carbonResult">Estimated CO‚ÇÇ: 0.00 kg/week</div>
</div>

<!-- LEADERBOARD -->
<div id="leaderboard" class="section">
  <h2>Leaderboard üèÜ</h2>
  <table>
    <thead><tr><th>Rank</th><th>Name</th><th>Score</th></tr></thead>
    <tbody id="leaderboardBody"></tbody>
  </table>
</div>

<!-- BADGES -->
<div id="badges" class="section">
  <h2>Badges ü•á</h2>
  <div id="badgesList"></div>
</div>

<!-- CHATBOT -->
<div id="chatbot" class="section">
  <h2>EcoEdu Chatbot ü§ñ</h2>
  <div id="chatWindow"></div>
  <input type="text" id="chatInput" placeholder="Ask me anything eco-friendly...">
  <button id="sendChat">Send</button>
</div>
</div>

<script>
// Navigation
const navBtns = document.querySelectorAll('.nav-btn');
const sections = document.querySelectorAll('.section');
navBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    navBtns.forEach(b => b.classList.remove('active'));
    sections.forEach(s => s.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.section).classList.add('active');
  });
});

// Players
let players = [];
let currentPlayerIndex = 0;

// Quiz data
const quizQuestions = [
  {question:"What gas do trees absorb?", options:["Oxygen","Carbon Dioxide","Nitrogen","Hydrogen"], answer:"Carbon Dioxide"},
  {question:"Renewable energy source?", options:["Coal","Wind","Oil","Gas"], answer:"Wind"},
  {question:"Action to save water?", options:["Leave tap open","Short showers","Wash car daily","Overflow tanks"], answer:"Short showers"},
  {question:"Best material for recycling?", options:["Plastic Bags","Glass Bottles","Styrofoam","Food Waste"], answer:"Glass Bottles"},
  {question:"Compost is made from?", options:["Plastic","Organic Waste","Metal","Glass"], answer:"Organic Waste"}
];

// Add player
document.getElementById('addUserBtn').addEventListener('click', () => {
  const name = document.getElementById('playerName').value.trim();
  if(!name) return alert("Enter a name!");
  players.push({name, score:0, previousScore:0});
  document.getElementById('playerList').innerHTML = players.map(p=>`<li>${p.name}</li>`).join('');
  document.getElementById('playerName').value='';
});

// Start Quiz
document.getElementById('startQuizBtn').addEventListener('click', () => {
  if(players.length===0) return alert("Add at least one player!");
  currentPlayerIndex=0;
  startQuizForPlayer();
});

let currentQuestion = 0;

function startQuizForPlayer(){
  document.querySelector('[data-section="quiz"]').click();
  currentQuestion=0;
  loadQuestion();
}

function loadQuestion(){
  const player = players[currentPlayerIndex];
  const quizBox = document.getElementById('quizBox');
  if(currentQuestion<quizQuestions.length){
    const q = quizQuestions[currentQuestion];
    quizBox.innerHTML = `<h3>${player.name}, Q${currentQuestion+1}: ${q.question}</h3>`+
      q.options.map(opt=>`<button class="optionBtn">${opt}</button>`).join('');
    document.querySelectorAll('.optionBtn').forEach(btn=>{
      btn.addEventListener('click',()=>checkAnswer(btn.innerText));
    });
  } else {
    quizBox.innerHTML = `<h3>${player.name}'s quiz done! üéâ Score: ${player.score}/${quizQuestions.length}</h3>`;
    updateLeaderboard();
    updateBadges();
    if(currentPlayerIndex<players.length-1){
      currentPlayerIndex++;
      quizBox.innerHTML += `<button id="nextPlayer">Next Player</button>`;
      document.getElementById('nextPlayer').addEventListener('click', startQuizForPlayer);
    } else {
      quizBox.innerHTML += `<p>All players finished! Check the leaderboard üèÜ</p>`;
    }
  }
}

function checkAnswer(selected){
  const player = players[currentPlayerIndex];
  const correct = quizQuestions[currentQuestion].answer;
  const quizBox = document.getElementById('quizBox');
  if(selected===correct){player.score++;}
  quizBox.innerHTML=`<p>${selected===correct?'‚úÖ Correct':'‚ùå Wrong'}! Correct: ${correct}</p>`;
  currentQuestion++;
  setTimeout(loadQuestion,1200);
}

// Leaderboard table
function updateLeaderboard(){
  const body = document.getElementById('leaderboardBody');
  const sorted = [...players].sort((a,b)=>b.score-a.score);
  body.innerHTML = sorted.map((p,i)=>`<tr><td>${i+1}</td><td>${p.name}</td><td>${p.score}</td></tr>`).join('');
}

// Badges
function updateBadges(){
  const badgesDiv = document.getElementById('badgesList');
  const sortedScores = [...players].map(p=>p.score).sort((a,b)=>a-b);
  const maxScore = Math.max(...sortedScores);
  const totalPlayers = players.length;
  badgesDiv.innerHTML = '';
  players.forEach(p=>{
    let badge='',cls='';
    const percentile = totalPlayers>1? (sortedScores.indexOf(p.score)/totalPlayers)*100 : 100;
    if(p.score===maxScore) {badge='Platinum Scholar'; cls='platinum';}
    else if(percentile>=90){badge='Gold Star Scholar'; cls='gold';}
    else if(percentile>=80){badge='Silver Scholar'; cls='silver';}
    else if(percentile>=70){badge='Bronze Scholar'; cls='bronze';}
    if(p.score>p.previousScore) {badge+=' + Rising Star'; cls='rising';}
    p.previousScore = p.score;
    badgesDiv.innerHTML += `<div class="badge ${cls}">${p.name}: ${badge}</div>`;
  });
}

// Carbon calculator
document.getElementById('miles').addEventListener('input', function(){
  const miles = parseFloat(this.value)||0;
  const kgCO2 = miles*0.404;
  document.getElementById('carbonResult').innerHTML = `Estimated CO‚ÇÇ: ${kgCO2.toFixed(2)} kg/week`;
});

// Chatbot
document.getElementById('sendChat').addEventListener('click',()=>{
  const input = document.getElementById('chatInput');
  const chatWindow = document.getElementById('chatWindow');
  const userMsg = input.value.trim();
  if(!userMsg) return;
  chatWindow.innerHTML += `<div class="chat-message"><b>You:</b> ${userMsg}</div>`;
  input.value='';
  let botReply="I'm not sure, but stay eco-friendly!";
  if(userMsg.toLowerCase().includes("recycle")) botReply="‚ôªÔ∏è Sort waste properly!";
  else if(userMsg.toLowerCase().includes("tree")) botReply="üå≥ Trees absorb CO‚ÇÇ!";
  else if(userMsg.toLowerCase().includes("water")) botReply="üíß Save water whenever possible!";
  chatWindow.innerHTML += `<div class="chat-message"><b>Bot:</b> ${botReply}</div>`;
  chatWindow.scrollTop = chatWindow.scrollHeight;
});
</script>
</body>
</html>
